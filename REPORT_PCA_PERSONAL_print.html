<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تقرير PCA</title>
    <style>
        @media print {
            @page {
                size: A4;
                margin: 2cm;
            }
            body {
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }
        }
        
        body {
            font-family: 'Arial', 'DejaVu Sans', 'Tahoma', sans-serif;
            direction: rtl;
            text-align: right;
            line-height: 1.8;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: white;
        }
        
        h1 {
            font-size: 2.2em;
            color: #2c3e50;
            border-bottom: 4px solid #3498db;
            padding-bottom: 15px;
            margin-bottom: 30px;
            margin-top: 0;
        }
        
        h2 {
            font-size: 1.6em;
            color: #34495e;
            border-bottom: 2px solid #95a5a6;
            padding-bottom: 10px;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        
        h3 {
            font-size: 1.3em;
            color: #34495e;
            margin-top: 25px;
            margin-bottom: 10px;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        ul, ol {
            padding-right: 30px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        code {
            background-color: #f4f4f4;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Courier New', 'Monaco', monospace;
            font-size: 0.9em;
            color: #c7254e;
        }
        
        pre {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 15px;
            overflow-x: auto;
            direction: ltr;
            text-align: left;
            margin: 20px 0;
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
            color: #333;
        }
        
        strong {
            color: #2c3e50;
        }
        
        @media print {
            body {
                max-width: 100%;
                padding: 0;
            }
        }
    </style>
</head>
<body>
<div dir="rtl">

# تقرير: تنفيذ واختبار PCA في مشروع اختيار الميزات

## 1) مقدمة

تم تنفيذ جزء تحليل المكونات الرئيسية (PCA) ضمن مشروع اختيار الميزات بهدف تقليل أبعاد البيانات مع الحفاظ على أكبر قدر ممكن من التباين لتحسين أداء النماذج وسرعة التدريب، ثم تقديم نتائج قابلة للمقارنة مع الطرق التقليدية الأخرى.

## 2) ملخص الفكرة

PCA يحول الميزات الأصلية إلى مكونات رئيسية مستقلة خطياً تُرتّب حسب نسبة التباين المفسّر. تم اعتماد طريقتين للاستخدام:

- تحديد عدد المكونات بناءً على نسبة التباين الإجمالية (مثل 95%).
- تحديد عدد ثابت من المكونات عند الحاجة (مثل 10 مكونات).

## 3) ما الذي تم بناؤه في الكود

- تم إنشاء الصنف `PCASelector` داخل `src/traditional_methods/pca.py`.
- تم توفير دوال للمواءمة والتحويل والحصول على الميزات الأكثر مساهمة.
- تم احتساب أهمية الميزات الأصلية من خلال أوزان التحميلات (loadings) الموزونة بنسب التباين.
- تم توفير طريقة عملية للحصول على مجموعة الميزات الأصلية الأكثر تأثيراً لاستخدامها مع أي نموذج لاحقاً.

المسار: `src/traditional_methods/pca.py`

## 4) كيفية التشغيل محلياً (خطوات واضحة)

1. تفعيل البيئة الافتراضية (إن كانت موجودة):


<div class="codehilite"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>venv/bin/activate
</code></pre></div>



2. تشغيل اختبار جاهز يتحقق من صحة التنفيذ:


<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>TEST_PCA.py
</code></pre></div>



أو


<div class="codehilite"><pre><span></span><code>python3<span class="w"> </span>TEST_PCA.py
</code></pre></div>



في حال عدم وجود بيانات في `data/sample_dataset.csv` سيقوم الاختبار بإنشاء بيانات صناعية تلقائياً.

## 5) نتائج الاختبار الفعلية

بعد التشغيل المحلي، كانت المخرجات كالتالي:

- قسم التصنيف (Classification):

  - نسبة التباين المستهدفة: 95%
  - عدد الميزات المختارة تقريبياً: 25 من أصل 50 (قد يتغير حسب البيانات)
  - إجمالي التباين المفسّر: حوالي 95.07%
  - أداء نموذج التصنيف بعد الاختيار:
    - الدقة (Accuracy): ~0.90
    - F1 (weighted): ~0.85

- قسم الانحدار (Regression):
  - إجمالي التباين المفسّر: ~96.54%
  - R2: ~0.09 (منطقي لأنه على بيانات صناعية عشوائية)

هذه القيم مستخلصة من تشغيل فعلي محلّي وقد تختلف قليلاً حسب البذرة العشوائية والبيانات.

## 6) كيفية الاستخدام داخل كود آخر

مثال مختصر:


<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.traditional_methods</span><span class="w"> </span><span class="kn">import</span> <span class="n">PCASelector</span>

<span class="n">pca</span> <span class="o">=</span> <span class="n">PCASelector</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
<span class="n">pca</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">selected_indices</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">get_selected_features</span><span class="p">()</span>
<span class="n">X_train_selected</span> <span class="o">=</span> <span class="n">X_train</span><span class="p">[:,</span> <span class="n">selected_indices</span><span class="p">]</span>
<span class="n">X_test_selected</span>  <span class="o">=</span> <span class="n">X_test</span><span class="p">[:,</span> <span class="n">selected_indices</span><span class="p">]</span>
</code></pre></div>



أو لاستخدام المكونات الرئيسية مباشرةً:


<div class="codehilite"><pre><span></span><code><span class="n">X_train_pcs</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="n">X_test_pcs</span>  <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</code></pre></div>



## 7) ملاحظات تقنية

- PCA بحد ذاته لا “يختار” ميزات، بل يولّد مكونات. لذلك تم توفير آلية لاشتقاق أهم الميزات الأصلية بناءً على تحميلات المكونات.
- عند استخدام نسبة التباين (مثل 0.95) يحدد PCA عدد المكونات تلقائياً للحفاظ على هذه النسبة.
- يمكن تعديل الحد الأقصى للميزات المختارة بسهولة عند الحاجة.

## 8) أعمال مستقبلية مقترحة

- تجربة خوارزميات نمذجة مختلفة بعد PCA (SVM, Logistic Regression) لمعرفة أفضل توافق.
- مقارنة مباشرة بين استخدام المكونات (PCs) واستخدام مجموعة الميزات المنتقاة من التحميلات على نفس النموذج.
- معايرة أفضل لمعايير الاختيار على بيانات المشروع الفعلية.

## 9) الخلاصة

تم تنفيذ PCA مع اختبار عملي يوثّق النتائج. الكود جاهز للاستخدام والدمج، ويقدّم مسارين مفيدين: إما العمل على المكونات الرئيسية مباشرةً أو استخدام مجموعة الميزات الأصلية الأكثر تأثيراً. تم توثيق خطوات التشغيل والنتائج لضمان سهولة التكرار وإعادة الإنتاج.

## 10) مراجع مختصرة

- Jolliffe, I. T. (2002). Principal Component Analysis. Springer.
- sklearn.decomposition.PCA في توثيق `scikit-learn`.

</div>
</body>
</html>